#!/bin/bash

# Install common packages
{{- range .packages.common.nix }}
nix-env -iA {{ . }}
{{- end }}

# Detect host environment (WSL2 or macOS in future)
isHost=false

# WSL2 detection via /mnt/c
if [ -d /mnt/c ]; then
  isHost=true
fi

# macOS detection via uname
if [ "$(uname)" = "Darwin" ]; then
  isHost=true
fi

# Install host packages if in host environment
if [ "$isHost" = true ]; then
  echo "Detected host environment. Installing host packagesâ€¦"
  {{- range .packages.host.nix }}
  nix-env -iA {{ . }}
  {{- end }}
else
  echo "Container or unsupported environment. Skipping host packages."
fi

